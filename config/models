User
    ident Text
    password Text Maybe
    UniqueUser ident
    deriving Typeable
Email
    email Text
    user UserId Maybe
    verkey Text Maybe
    UniqueEmail email

Calendar
    owner UserId
    name Text
    desc Text Maybe
    color Text
    public Bool
    publicedit Bool
    UniqueCalendar owner name
Target
    owner UserId
    name Text
    desc Text Maybe
    place Text Maybe
    urgency Urgency
    attendees [Text]

-- many-to-many
UserAttendee
    target TargetId
    user UserId
    UniqueTargetAttend target user
CalTarget
    calendar CalendarId
    target TargetId
    UniqueCalTarget calendar target

-- different targets
Todo
    target TargetId
    done Bool
    begin UTCTime
    end UTCTime
    repeat Repeat
    alarm Alarm
Note
    target TargetId
    content Text
Event
    target TargetId
    begin UTCTime
    end UTCTime
    length DiffTime
    repeat Repeat
    alarm Alarm
